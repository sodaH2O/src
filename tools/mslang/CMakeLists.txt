CMAKE_MINIMUM_REQUIRED (VERSION 2.8.10)
cmake_policy(SET CMP0048 NEW)
PROJECT (MSLANG VERSION 0.1)

#SET (MSLANG_VERSION_MAJOR 0)
#SET (MSLANG_VERSION_MINOR 1)

SET (IPPL_CXX_FLAGS
    "-DIPPL_LINUX -DIPPL_STRINGSTREAM -DIPPL_MPI -DMPICH_SKIP_MPICXX -DIPPL_DONT_POOL -DIPPL_USE_XDIV_RNG -DPETE_BITWISE_COPY -DIPPL_USE_PARTIAL_SPECIALIZATION -Drestrict=__restrict__ -DNOCTAssert ${IPPL_CXX_FLAGS}"
    )

 SET (CMAKE_CXX_FLAGS
     "${OTHER_CXX_FLAGS} ${IPPL_CXX_FLAGS} ${CMAKE_CXX_FLAGS} "
     )

INCLUDE_DIRECTORIES (
    ${CMAKE_SOURCE_DIR}/src
    ${CMAKE_SOURCE_DIR}/src/Classic
    ${CMAKE_SOURCE_DIR}/ippl/src
    ${GSL_INCLUDE_DIR}
)

LINK_DIRECTORIES (
    ${IPPL_LIBRARY_DIR}
    ${CMAKE_SOURCE_DIR}/src
)

SET (MSLANG_LIBS
    libOPAL
    ${OPTP_LIBS}
    ${OPTP_LIBRARY}
    ${IPPL_LIBRARY}
    ${GSL_LIBRARY}
    ${GSL_CBLAS_LIBRARY}
    ${H5Hut_LIBRARY}
    ${HDF5_LIBRARY}
    ${Boost_LIBRARIES}
    m
    z
)

MESSAGE( STATUS "Compiling MSLang")
ADD_EXECUTABLE( mslang mslang.cpp )
TARGET_LINK_LIBRARIES( mslang ${MSLANG_LIBS} )

INSTALL(TARGETS mslang RUNTIME DESTINATION "${CMAKE_INSTALL_PREFIX}/bin")
